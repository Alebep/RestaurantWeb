Crie o index.html será nosso formulário

<form action="senha.php" method="POST">
usuário : <br> <input name="usuario" type="text" size="30"><br>
senhal: <br> <input name="password" type="password" size="30"> <br>
<input name="enviar" type="submit" id="enviar" value="enviar"> 

Coisas úteis!

NAME = usuário e NAME = password será necessário para próxima página o ACTION = senha.php

***********************************************************************

sendo assim vamos criar o senha.php

<?php
ob_start();
$login = "marquinho"; //armazena o usuário dentro da variável $login
$senha = "123456"; //armazena a senha dentro da variável $senha

//se o usuário digitado for igual ao que esta ali em cima, e a senha também
echo "
LOGIN: $login<br>
LOGIN DIGITADO: ".$_POST['usuario']."<br>
SENHA: $senha<br>
SENHA DIGITADA: ".$_POST['password']."<br><br>
";
if ($login == $_POST['usuario'] && $senha == $_POST['password'])
//entao execute isto
{
//aqui vai entrar a novidade, antes de redirecionarmos
//vamos salvar algumas informações para utilizar depois

//primeiro eu dou o valor 1 para a variável $validacao
$validacao = "1"; //usaremos essa variável para verificar se ele está logado, se o usuário não tiver o valor 1 nessa variável ele não está logado!
$usuario = $_POST['usuario']; // puxa o nome do usuário digitado no formulario do index.html
//inicio uma Sessao (session e similar a uma gaveta movel)
session_start();
//gravo as informações das variáveis dentro das sessões
$_SESSION['usuario'] = $usuario;
$_SESSION['validacao'] = $validacao;

//Pronto agora redirecione o usuário para a página secreta

//abre a página secretaaaa
header("Location: secreta.php");
}
//senao
else
{
//exiba um alerta dizendo que a senha esta errada
?>

<script type="text/javascript">
alert("Login ou senha incorreta");
</script>

<?
echo "<a href=index.html>VOLTAR</a>";
}
?>


***********************************************************************

Bem agora vamos criar nossa página secreta, e fazer a verificação a partir da Sessão que abrimos

secreta.php

<?
//Inicia a sessão
session_start();
//agora verifico se ele possui permissão para acessar a página
if ($_SESSION['validacao'] == "1")
{
?>
<HTML>
<HEAD>
<TITLE>Pagina restrita 1</TITLE>
</HEAD>
<BODY>
Seja bem vindo <b><? echo $usuario; ?></b> a Pagina restrita
<br>
<a href="deslogar.php">Deslogar</a>
</BODY>
</HTML>
<?
} else {
//exiba um alerta dizendo que a senha esta errada
?>

<script type="text/javascript">
alert("Login ou senha incorreta");
</script>

<?
echo "<a href=index.html>VOLTAR</a>";
}
?>


***********************************************************************

Agora nós criamos um link para deslogar correto na página restrita correto?

Então vamos criar esta página que terá a função de nada mais do que "deletar" as sessões

Sendo assim a variável $validacao terá o valor 0 ao invés de 1, quando ele tentar entrar vai dar erro ; )

deslogar.php

<? 
ob_start();
//INICIALIZA A SESSÃO 
session_start(); 

//DESTRÓI AS SESSOES
unset($_SESSION[usuario]); 
unset($_SESSION[validacao]);
session_destroy(); 

//REDIRECIONA PARA A TELA DE LOGIN 
Header("Location: index.html"); 
?> 
